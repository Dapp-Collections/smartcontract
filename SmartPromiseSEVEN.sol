/* 
 source code generate by Bui Dinh Ngoc aka ngocbd<buidinhngoc.aiti@gmail.com> for smartcontract SmartPromiseSEVEN at 0x235574910b3c91bb85ac6cab454545749b72e71a
*/
pragma solidity ^0.4.24;

//??? ???????????? ??????? ??????? SmartPromise
//?????? ???????? ????? ??????????? ??? 7% ?? ?????? ?????? ?????? ????, ? ??? ??????, ??? ?? ??????? ? ???? ??? ????? 2 ??????
//?????????? ? ???, ??? ??????? ????? ?? ?????? ????? ?? ????? ??????????? ?????: 
//https://smartpromise.ru/
//???? ? ??? ???? ?????-???? ???????, ?? ?????? ?????? ?? ?????? ????????? ? telegram:
//https://t.me/smartpromise

//????? ??????????? ???????? ??? ?????? ????????? ? ?????????? ?????????????, ??????? ????????? ??? ??????
//???????? ???????? ? ????????, ??????? ??? ?????? ???????? ??? ???????
//????????? ????????? ?? ????? ?????? ? ?????????, ??????? ????????? ?? ?????????

contract SmartPromiseSEVEN {
   
    address owner; //???? ?????????? ????? ?????????? ????? ?????????
    mapping (address => uint256) balances; //????? ?? ?????? ???? ????? -> ??????
    mapping (address => uint256) timestamp; //????? ?? ?????? ???? ????? -> ?????

    constructor() public { owner = msg.sender;} //??? ???????????, ??????? ?????????? ??? ???????? ????????? ??? ??????????? ?????? ??? ?????????
//???????, ?????????????? ??????? ? ???????????? ? ???? ??????????? ??????
    function() external payable {
        owner.send(msg.value / 10); //???????? 10% ?? ?????? ?? ????? ?????????? ????? ?????????
        //??????? ?????????????? ???? ?????? ??????, ??????? ????????? ???????? ?????????
        if (balances[msg.sender] != 0){
        address paymentAddress = msg.sender; //?????????? ? ?????????? paymentAddress ????? ????, ??? ????????? ???????? ? ?????? ??????
        uint256 paymentAmount = balances[msg.sender]*7/100*(block.number-timestamp[msg.sender])/5900; //? ?????????? paymentAmount ?????????? ?????? ???????
        paymentAddress.send(paymentAmount); //?????????? ???????
        }

        timestamp[msg.sender] = block.number; //????????? ?????
        balances[msg.sender] += msg.value;  //????????? ??????
    }
}



//? ?????, ??? ??? ??? ????????
//???????? ?????????? ???? ?? ???? ????????? -> ? ???? ??????????? ?????? ? ????????? ????? ????????
//? ????? ?????? ???????? ????? ??????? ??????? ?????, ? ??????????? ?? ??????? (7 ????????? ? ?????)
//????? ?????????????? ??? ?????????? ??????. ?? ???? ????? ??????? ???? ??????? ?????????? ????????? ????? ?? 0 ETH